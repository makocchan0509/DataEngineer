## Google Cloud 
## Professional Data Engineer

---

どこかでデータ分析の座学を予定しておりましたが、最近GCPのデータ分析に関する勉強をしていたので共有します。

>>>

まさに本日AMにProfessional Data Engineerの認定試験を受けてきました

>>>

結果はいかに...

---

### 試験で問われること
- データ処理システムの設計
- データ処理システムの構築と運用化
- 機械学習モデルの運用化
- ソリューションの品質の確保  

[認定サイト](https://cloud.google.com/certification/data-engineer/?hl=ja)

>>>

GCPのサービスを中心としてデータ収集・処理・分析を行うためにどんな設計が最適かみたいな感じです。

---

### データエンジニアの必要性
- ビジネスの実態を把握したり、データの傾向から未来を予測して新たなビジネスの立案といった付加価値を得ることができる。

---

### データ分析の実情と今後
- McKinseyによると現在分析されているデータ全体の1%程度と言われています。
- 一方で今後スマートデバイスやセンサーといった技術が普及することでデータ量は年ごとに何倍にもなるらしいです。

---

### 今後大量のデータを扱って分析できる人材が求められる 
#### らしいです。

---

### データ分析の基本というかプロセス
- **E**xtract **T**ransform **L**oadです。

>>>

Extract: データを抽出  
Transform: データを変換する  
Load: データの読込

---

### Extract
- 貯め込んだデータから分析対象を選択して抽出します

>>>

### データレイク
- 活用する前のデータを溜め込むところ
- とりあえずフォーマットを決めずに溜め込めることが大事
- Extractはここからデータを抽出すること

---

### Transform
- 抽出したデータを分析できるように変換する
- 抽出したデータはDWHへ出力する。

---

### Load
- データを出力するプロセス
- DWHへデータを登録します。

---

### DataWareHouse
- データウェアハウスです
- 集めたデータを実用できるように変換されたデータを溜め込んでいきます。

---

各種サービス  
![GCP](https://image.slidesharecdn.com/1031-191031092923/95/cloud-onair-cloud-data-fusion-gcp-20191031-9-638.jpg?cb=1572515429)

---

主要なデータ処理アークテクチャ
![Data](https://cloudx-bricks-prod-bucket.storage.googleapis.com/d7c57ac02f4941ae23beb551ddc60af79868051e21d64a19c0726099a31c49ac.svg)

---

### GCPにおけるデータ収集サービス

>>>

### CloudPub/Sub
- トピックとサブスクライバーとかなるメッセージジングサービス

![Pub/Sub](https://cloud.google.com/pubsub/images/publishers_subscribers.svg?hl=JA)

>>>

#### push型/pull型配信に対応
- push型はサブスクリプションでhttpによるキック
- リアルタイムでのストリーミングの場合はpush型を採用すること。
- pull型は受信側からサブスクリプションへキック

>>>

#### 注意点
- スケーラブルなサービスであるがゆえにメッセージの順列は担保されない。
- メッセージの重複が発生することがある。

**後続のプロセスはこれらを考慮して実装すること**

---

### データ変換サービス

>>>

### CloudDataflow
- Apache Beamをベースとしたパイプラインサービス
- Java/Pythonによりジョブを実装する
- バッチ、リアルタイムでのストリーミング処理にも使える

>>>

### CloudDataprep
- GUIベースでのデータ変換ジョブ
- プログラミングスキルがなくてもパイプラインを構築できる
- excelを触る感覚でデータの編集ができ操作を記録してジョブ化できる
- リアルタイム処理はできない
- DataFusionという同じくGUIのサービスがある。

>>>

変換サービスの比較
![変換比較](https://www.niandc.co.jp/sol/news/images/data-fusionimage_002.jpg)

>>>

### CloudDataproc
- GCPマネージドのHadoop/Sparkサービス
- クラウドではジョブ実行時のみクラスタを生成して完了したら破棄するのが一般的
- オンプレだとクラスタ内のHDFSという永続ボリュームを利用するがCloudStorageを利用するのが一般的

---

### GCPにおけるDWH

>>>

### BigQuery
- サーバレスなデータウェアハウス（カラムナデータベース）
- データ保管、クエリによる読み込み量に対して課金される
- BigQueryMLという機械学習機能もある。
- 後述する可視化サービスと連携してグラフ等でのビジュアライズが可能

>>>

- データ読み込み量を減らしたり、読み込み速度を早めるのがポイント
- クエリの書き方やテーブルのパーティション、クラスタ、非正規化といった設計で工夫する

---

### データの可視化

>>>

### CloudDataPortal(旧DataStudio)
- BigQueryのデータを読み込んでグラフ化してレポートが作成できる。

>>>

レポートサンプル
![DataPortal](https://i0.wp.com/goworkship.com/magazine/wp-content/uploads/2018/04/dd0ec16b8e699ecd3365bfe10aeb7b42.png?w=1204&ssl=1)

---

まだまだいろんなサービスがありますが一旦ここまでです

